# 贪吃蛇AI精简日志系统

## 概述
为了满足2KB日志大小限制，我们开发了一套高度压缩的日志格式，同时保持可读性和分析能力。

## 精简日志格式

### 基本格式
所有信息以管道符(`|`)分隔，采用短标签格式：

```
|T<tick>|P<y>,<x>|S<score>|L<length>|CD<shield_cd>|ST<shield_time>|...
```

### 标签对照表
| 精简标签 | 含义 | 示例 |
|---------|------|------|
| `T253` | 回合253 | 游戏回合数 |
| `P15,20` | 位置(15,20) | 蛇头位置(y,x) |
| `S0` | 分数0 | 当前得分 |
| `L3` | 长度3 | 蛇身长度 |
| `CD0` | 护盾冷却0 | 护盾冷却回合数 |
| `ST0` | 护盾时间0 | 护盾持续回合数 |
| `CD:4` | 候选数4 | 考虑的移动选项数 |

### 决策类型标签
| 标签 | 含义 | 说明 |
|------|------|------|
| `SUR` | 生存模式 | 启动生存决策 |
| `M:2` | 正常移动:右 | 普通追求移动 |
| `SM:0,4` | 安全移动:左,可达性4 | 生存模式下的安全移动 |
| `SS` | 生存护盾 | 激活护盾保命 |
| `DM:1` | 绝望移动:上 | 无路可走的绝望移动 |
| `FS` | 最终护盾 | 最后手段护盾 |
| `SP:2` | 护盾穿越:右 | 用护盾穿过障碍 |
| `DNG` | 危险检测 | 检测到威胁 |
| `SN` | 蛇身阻挡激活护盾 | 蛇身挡路，开护盾 |
| `SB` | 蛇身阻挡无护盾 | 蛇身挡路，无护盾 |

### 目标物品标签
| 标签 | 含义 | 示例 |
|------|------|------|
| `I@15,20:15` | 普通食物@位置:价值 | 15分食物在(15,20) |
| `C@10,5:100` | 宝箱@位置:价值 | 100分宝箱在(10,5) |
| `TG@12,8:30` | 目标@位置:距离 | 目标在(12,8)，距离30 |

## 压缩效果

### 压缩前（详细格式）
```
|TICK:253|POS:15,20|SCORE:0|LENGTH:3|SHIELD_CD:0|SHIELD_TIME:0|CANDIDATES:0|SURVIVAL_MODE|SAFE_MOVE:LEFT,REACHABILITY:4
```
**大小**: ~120字符

### 压缩后（精简格式）
```
|T253|P15,20|S0|L3|CD0|ST0|CD:0|SUR|SM:0,4
```
**大小**: ~40字符

**压缩率**: 约67%，节省了2/3的空间！

## 使用方法

### 1. 生成精简日志
```bash
./my-snake < input.txt > output.txt
# 输出格式：动作换行+精简日志
```

### 2. 分析精简日志
```bash
./log_analyzer_compact log_file.txt
```

### 3. 示例输出
```
🐍 贪吃蛇AI决策分析报告 🐍
==================================================
回合 253:
📍 位置:(15,20) 分数:0 长度:3
🛡️ 护盾:可用✅
🎯 目标:0个候选
🧠 决策:🆘生存模式 (安全移动，可达性:4)
⚡ 行动:LEFT
==================================================
```

## 技术特点

1. **高压缩率**: 67%的空间节省
2. **保持可读性**: 短标签仍然直观
3. **快速解析**: 分隔符解析，O(n)复杂度
4. **错误容忍**: 异常处理，忽略无效token
5. **可扩展性**: 易于添加新的标签类型

## 文件清单

- `my-snake.cpp`: 主AI程序，生成精简日志
- `log_analyzer_compact.cpp`: 精简日志分析器
- `sample_compact_log.txt`: 精简格式示例日志
- `simple_test.in`: 最小测试输入
- `ai_test_log.txt`: AI生成的测试日志

这个精简日志系统在满足2KB限制的同时，保持了完整的AI决策追踪能力！
